{
  "hash": "71acb5e232b13cd66d73eb4f64fb79fc",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-Home Exercise 02\"\nauthor: \"Bhairavi Vairavelu\"\ndate: \"Sep 30 2024\"\ndate-modified: \"last-modified\"\nexecute:\n  eval: true\n  echo: true\n  message: false\n  freeze: true\n---\n\n\n# Discovering Impacts of COVID-19 on Thailand Tourism Economy using Spatial & Spatio-Temporal Statistics\n\n## 1.0 Overview\n\nTourism is one of Thailand’s largest industries, accounting for some 20% of the gross domestic product (GDP). In 2019, Thailand earned 90 billion US\\$ from domestic and international tourism, but the COVID-19 pandemic caused revenues to crash to 24 billion US\\$ in 2020.\n\nThe figure below shows the total revenue receipt from tourism sector from January 2019 until Feb 2023. This figure also reveals that the revenue from tourism industry have been recovered gradually since September 2021.\n\n![](fig01.png){fig-align=\"center\"}\n\nHowever, it is important to note that the tourism economy of Thailand are not evenly distributed. The figure below reveals that the tourism economy of Thailand are mainly focused on five provinces, namely Bangkok, Phuket, Chon Buri, Krabi and Chiang Mai.\n\n![](fig02.png){fig-align=\"center\"}\n\n### 1.1 Objectives\n\nThrough this exercise, we are interested to discover the following:\n\n-   If the key indicators of tourism economy of Thailand are independent from space and space and time\n\n-   If the tourism economy is indeed spatial and spatio-temporal dependent\n\n    -   If so, we would like to detect where are the clusters and outliers, and the emerging hot spot/cold spot areas\n\n### 1.2 The Task\n\nWe will be performing the following tasks in this exercise:\n\n-   Preparation of the following Geospatial data layer:\n\n    -   Study area layer in sf polygon features (at province level incl. Bangkok)\n\n    -   Tourism economy indicators layer within the study area in sf polygon features\n\n    -   Derived tourism economy indicator layer in spacetime s3 class of sfdep, with time series kept at month and year levels\n\n-   Perform Global Spatial Autocorrelation Analysis using sfdep methods\n\n\n```{=html}\n<!-- -->\n```\n\n-   Perform Local Spatial Autocorrelation Analysis using sfdep methods\n\n-   Perform Emerging Hot/Cold Spot Analysis using sfdep methods\n\n### 1.3 Analytical Tools\n\nThe following R packages will be used for this exercise:\n\n-   **sf**, which is used for importing and handling geospatial data in R\n\n-   **sfdep**, which is used for spatial dependence with spatial features\n\n-   **tmap**, which is used to prepare cartographic quality choropleth maps\n\n-   **plotly**, for creating interactive graphs\n\n-   **tidyverse**, which is mainly for wrangling attribute data in R\n\n-   **lubridate**, which is used to parse and manipulate dates\n\nThe code chunk below uses p_load() of pacman package to check if the necessary packages have been installed in R. If yes, we will load the packages on R environment as shown below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(sf, sfdep, tmap, plotly, tidyverse, lubridate)\n```\n:::\n\n\n## 2.0 Data\n\n### 2.1 Getting the Data\n\nFor this exercise, we will be using two datasets:\n\n-   Thailand Domestic Tourism Statistics from Kaggle\n\n![](data01.png){fig-align=\"center\"}\n\n-   Thailand - Subnational Administrative Boundaries from HDX\n\n![](data02.png){fig-align=\"center\"}\n\n### 2.2 Importing the Data\n\nThese are the files we have for Thailand Domestic Tourism Statistics:\n\n![](data01_files.png){fig-align=\"center\"}\n\nNote that we will only use Version 2 of the dataset.\n\nThe code chunk below is used to load the ver2 data into our R environment.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#|eval: false\ntourism <- read_csv(\"data/aspatial/thailand_domestic_tourism_2019_2023_ver2.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 30800 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (5): province_thai, province_eng, region_thai, region_eng, variable\ndbl  (1): value\ndate (1): date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nwrite_rds(tourism, \"data/rds/tourism.rds\")\n```\n:::\n\n\nThe code chunk below will be used to import the saved tourism.rds into R environment.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntourism <- read_rds(\"data/rds/tourism.rds\")\n```\n:::\n\n\nThese are the files we have for Thailand - Subnational Administrative Boundaries:\n\n![](data02_files.png){fig-align=\"center\"}\n\nRecall that this HDX data source contains information on 4 administrative levels - 0 for Country, 1 for Province, 2 for District and 3 for Sub-District. Hence, there were numerous files downloaded from this data source. However, we only want to focus on Province-level analysis for this exercises. As such, we will only load the ADM1 data into our R environment.\n\nThe code chunk below is used to load the ver2 data into our R environment.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#|eval: false\nboundaries = st_read(dsn = \"data/geospatial\",\n                     layer = \"tha_admbnda_adm1_rtsd_20220121\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `tha_admbnda_adm1_rtsd_20220121' from data source \n  `C:\\byebhai8\\ISSS626-GeospatialAnalytics\\Take-Home_Ex\\Take-Home_Ex02\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 77 features and 16 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 97.34336 ymin: 5.613038 xmax: 105.637 ymax: 20.46507\nGeodetic CRS:  WGS 84\n```\n\n\n:::\n\n```{.r .cell-code}\nwrite_rds(boundaries, \"data/rds/boundaries.rds\")\n```\n:::\n\n\nThe code chunk below will be used to import the saved boundaries.rds into R environment.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nboundaries <- read_rds(\"data/rds/boundaries.rds\")\n```\n:::\n\n\n## 3.0 Data Wrangling\n\nLet's take a quick look at the newly imported data by using the glimpse() function of dplyr package as shown below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(tourism)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 30,800\nColumns: 7\n$ date          <date> 2019-01-01, 2019-01-01, 2019-01-01, 2019-01-01, 2019-01…\n$ province_thai <chr> \"กรุงเทพมหานคร\", \"ลพบุรี\", \"พระนครศรีอยุธยา\", \"สระบุรี\", \"ชัยนาท…\n$ province_eng  <chr> \"Bangkok\", \"Lopburi\", \"Phra Nakhon Si Ayutthaya\", \"Sarab…\n$ region_thai   <chr> \"ภาคกลาง\", \"ภาคกลาง\", \"ภาคกลาง\", \"ภาคกลาง\", \"ภาคกลาง\", \"…\n$ region_eng    <chr> \"central\", \"central\", \"central\", \"central\", \"central\", \"…\n$ variable      <chr> \"ratio_tourist_stay\", \"ratio_tourist_stay\", \"ratio_touri…\n$ value         <dbl> 93.37, 61.32, 73.37, 67.33, 79.31, 71.70, 64.65, 71.21, …\n```\n\n\n:::\n:::\n\n\nThe tourism data serves as the attribute table we will use moving forward.\n\nLikewise, we can run the glimpse() function on the boundaries data for some quick insights.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(boundaries)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 77\nColumns: 17\n$ Shape_Leng <dbl> 2.417227, 1.695100, 1.251111, 1.884945, 3.041716, 1.739908,…\n$ Shape_Area <dbl> 0.13133873, 0.07926199, 0.05323766, 0.12698345, 0.21393797,…\n$ ADM1_EN    <chr> \"Bangkok\", \"Samut Prakan\", \"Nonthaburi\", \"Pathum Thani\", \"P…\n$ ADM1_TH    <chr> \"กรุงเทพมหานคร\", \"สมุทรปราการ\", \"นนทบุรี\", \"ปทุมธานี\", \"พระนครศรีอ…\n$ ADM1_PCODE <chr> \"TH10\", \"TH11\", \"TH12\", \"TH13\", \"TH14\", \"TH15\", \"TH16\", \"TH…\n$ ADM1_REF   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ ADM1ALT1EN <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ ADM1ALT2EN <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ ADM1ALT1TH <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ ADM1ALT2TH <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ ADM0_EN    <chr> \"Thailand\", \"Thailand\", \"Thailand\", \"Thailand\", \"Thailand\",…\n$ ADM0_TH    <chr> \"ประเทศไทย\", \"ประเทศไทย\", \"ประเทศไทย\", \"ประเทศไทย\", \"ประเทศ…\n$ ADM0_PCODE <chr> \"TH\", \"TH\", \"TH\", \"TH\", \"TH\", \"TH\", \"TH\", \"TH\", \"TH\", \"TH\",…\n$ date       <date> 2019-02-18, 2019-02-18, 2019-02-18, 2019-02-18, 2019-02-18…\n$ validOn    <date> 2022-01-22, 2022-01-22, 2022-01-22, 2022-01-22, 2022-01-22…\n$ validTo    <date> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ geometry   <MULTIPOLYGON [°]> MULTIPOLYGON (((100.6139 13..., MULTIPOLYGON (…\n```\n\n\n:::\n:::\n\n\nThe boundaries data contains the geospatial information we require for our analysis.\n\n## Global Spatial Autocorrelation Analysis\n\nxx\n\n## Local Spatial Autocorrelation Analysis\n\nxx\n\n## Emerging Hot Spot Analysis\n\nxx\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}